{"version":3,"sources":["components/ProtectedRoute.js","utils/api.js","images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","images/SuccessIcon.svg","images/FailIcon.svg","components/InfoTooltip.js","components/AddPlacePopup.js","components/Register.js","components/Login.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["ProtectedRoute","Component","component","props","isLoggedIn","to","api","options","this","_url","baseUrl","_headers","headers","res","ok","json","Promise","reject","status","data","fetch","method","body","JSON","stringify","avatar","then","_handleOriginalResponse","id","shouldSetLike","setLike","deleteLike","_id","name","link","about","all","getUserInfo","getCardList","Authorization","Header","className","src","logo","alt","exact","path","email","onClick","onSignOut","CurrentUserContext","createContext","Card","likes","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","cardDeleteButtonClassName","isLiked","some","i","cardLikeButtonClassName","type","style","backgroundImage","length","Main","onEditProfile","onAddPlace","onEditAvatar","onCardClick","cards","map","card","Footer","ImagePopup","onClose","PopupWithForm","title","children","isOpen","onSubmit","submitText","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","placeholder","minLength","maxLength","required","value","onChange","target","EditAvatarPopup","onUpdateAvatar","avatarInputRef","useRef","current","ref","InfoTooltip","isSuccess","successIcon","failIcon","AddPlacePopup","nameInputRef","linkInputRef","Register","React","setEmail","password","setPassword","onRegister","autoComplete","Login","setpassword","onLogin","BASE_URL","checkResponse","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","setIsLoggedIn","history","useHistory","setIsSuccess","setIsLoading","getInitialData","user","catch","err","console","log","finally","jwt","localStorage","getItem","auth","push","closeAllPopups","Provider","removeItem","onInfoTooltip","changeLikeCardStatus","newCard","state","c","deleteCard","filter","setItem","token","Accept","setUserInfo","updatedUser","place","postCard","setUserAvatar","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.93fb4646.chunk.js","sourcesContent":["import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nexport default function ProtectedRoute({component: Component, ...props}){\n  return(\n      <Route>{\n          () => props.isLoggedIn ? <Component {...props}/> : <Redirect to=\"/sign-in\"/>\n      }\n      </Route>\n  )\n}","class Api {\n    constructor(options) {\n      this._url = options.baseUrl;\n      this._headers = options.headers;\n    }\n  \n    _handleOriginalResponse(res) {\n      if (!res.ok) {\n        return Promise.reject(`Error: ${res.status}`);\n      }\n      return res.json();\n    }\n  \n    setUserAvatar(data) {\n      return fetch(`${this._url}/users/me/avatar`, {\n        method: 'PATCH',\n        headers: this._headers,\n        body: JSON.stringify({\n          avatar: data.avatar\n        })\n      }).then(this._handleOriginalResponse)\n    }\n  \n    deleteLike(id) {\n      return fetch(`${this._url}/cards/likes/${id}`, {\n        method: 'DELETE',\n        headers: this._headers,\n      }).then(this._handleOriginalResponse)\n    }\n  \n    setLike(id) {\n      return fetch(`${this._url}/cards/likes/${id}`, {\n        method: 'PUT',\n        headers: this._headers,\n      }).then(this._handleOriginalResponse)\n    }\n\n    changeLikeCardStatus(id, shouldSetLike) {\n      return shouldSetLike ? this.setLike(id) : this.deleteLike(id)\n    }\n  \n    deleteCard(data) {\n      return fetch(`${this._url}/cards/${data._id}`, {\n        method: 'DELETE',\n        headers: this._headers\n      }).then(this._handleOriginalResponse)\n    }\n  \n    postCard(data) {\n      return fetch(`${this._url}/cards`, {\n        method: 'POST',\n        headers: this._headers,\n        body: JSON.stringify({\n          name: data.name,\n          link: data.link\n        })\n      }).then(this._handleOriginalResponse)\n    }\n  \n    setUserInfo(data) {\n      return fetch(`${this._url}/users/me`, {\n        method: 'PATCH',\n        headers: this._headers,\n        body: JSON.stringify({\n          name: data.name,\n          about: data.about\n        })\n      }).then(this._handleOriginalResponse)\n    }\n  \n    getInitialData() {\n      return Promise.all([this.getUserInfo(), this.getCardList()]);\n    }\n  \n    getCardList() {\n      return fetch(`${this._url}/cards`, {\n        method: 'GET',\n        headers: this._headers\n      }).then(this._handleOriginalResponse)\n    }\n  \n    getUserInfo() {\n      return fetch(`${this._url}/users/me`, {\n        method: 'GET',\n        headers: this._headers\n      }).then(this._handleOriginalResponse)\n    }\n  }\n\n  const api = new Api({\n    baseUrl: 'https://mesto.nomoreparties.co/v1/cohort-25',\n    headers: {\n      Authorization: '278fac41-4fca-42d8-b991-ed853233cc11',\n      'Content-Type': 'application/json'\n    }\n  });\n\nexport default api;","export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import logo from '../images/logo.svg';\nimport React from \"react\";\nimport { Switch, Route, Link } from \"react-router-dom\";\n\nfunction Header(props) {\n    return (\n        <header className=\"header\">\n            <img className=\"logo header__logo\" src={logo} alt=\"Логотип\" />\n            <Switch>\n                <Route exact path=\"/sign-in\">\n                    <Link to=\"/sign-up\" className=\"header__link\">\n                        Регистрация\n                    </Link>\n                </Route>\n                <Route exact path=\"/sign-up\">\n                    <Link to=\"/sign-in\" className=\"header__link\">\n                        Войти\n                    </Link>\n                </Route>\n                <Route exact path=\"/\">\n                    <div className=\"header__user-info\">\n                        <p className=\"header__email\">{props.email}</p>\n                        <Link to='/sign-in' className=\"header__link\" onClick={props.onSignOut}>Выйти</Link>\n                    </div>\n                </Route>\n            </Switch>\n        </header>\n    );\n}\n\nexport default Header;\n","import { createContext } from 'react';\n\nconst CurrentUserContext = createContext(null);\n\nexport default CurrentUserContext;\n","import { useContext } from \"react\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\n\nfunction Card({ data: { name, link, likes }, data, onClick, onCardLike, onCardDelete }) {\n  const currentUser = useContext(CurrentUserContext);\n\n  const handleClick = () => {\n    onClick(data);\n  };\n\n  const handleLikeClick = () => {\n    onCardLike(data);\n  };\n\n  const handleCardDelete = () => {\n    onCardDelete(data);\n  };\n\n  const isOwn = data.owner._id === currentUser._id;\n\n  const cardDeleteButtonClassName = (\n    `card__remove ${isOwn ? 'card__remove_visible' : 'card__remove_hidden'}`\n  );\n\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = data.likes.some(i => i._id === currentUser._id);\n\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\n  const cardLikeButtonClassName = `card__like ${isLiked ? 'card__like_active' : ''}`;\n\n  return (\n    <div className=\"card\">\n      <button \n        type=\"button\" \n        className={cardDeleteButtonClassName}\n        onClick={handleCardDelete}\n      />\n      <div\n        className=\"card__image\"\n        style={{ backgroundImage: `url(${link})` }}\n        onClick={handleClick}\n      />\n      <div className=\"card__container\">\n        <h2 className=\"card__text\">{name}</h2>\n        <div className=\"card__like-container\">\n          <button  \n          type=\"button\" \n          className={cardLikeButtonClassName} \n          onClick={handleLikeClick}\n          />\n          <span className=\"card__like-count\">{likes.length}</span>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import { useEffect, useState, useContext } from \"react\";\nimport api from \"../utils/api\";\nimport Card from \"./Card\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\n\nfunction Main({ onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete }) {\n    const currentUser = useContext(CurrentUserContext);\n\n    return (\n        <main className=\"content\">\n            <section className=\"profile\">\n                <div className=\"profile__avatar-container\">\n                    <div\n                        className=\"profile__avatar\"\n                        style={{ backgroundImage: `url(${currentUser.avatar})` }}\n                    />\n                    <button\n                        type=\"button\"\n                        className=\"profile__avatar-edit-button\"\n                        onClick={onEditAvatar}\n                    />\n                </div>\n                <div className=\"profile__info\">\n                    <div className=\"profile__title-wrapper\">\n                        <h1 className=\"profile__title\">{currentUser.name}</h1>\n                        <button\n                            type=\"button\"\n                            className=\"profile__edit-button\"\n                            onClick={onEditProfile}\n                        />\n                    </div>\n                    <p className=\"profile__subtitle\">{currentUser.about}</p>\n                </div>\n                <button\n                    type=\"button\"\n                    className=\"profile__add-button\"\n                    onClick={onAddPlace}\n                />\n            </section>\n\n            <section className=\"cards\">\n                {cards.map(card => (\n                    <Card\n                        key={card._id}\n                        data={card}\n                        onClick={onCardClick}\n                        onCardLike={onCardLike}\n                        onCardDelete={onCardDelete}\n                    />\n                ))}\n            </section>\n        </main>\n    );\n\n}\n\nexport default Main;\n","function Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">&copy;2021 Анастасия Дубковецкая</p>\n        </footer>\n    );\n}\n\nexport default Footer;\n","function ImagePopup({ onClose, card }) {\n    if (!card) {\n        return null;\n    }\n\n    return (\n        <div className={`popup popup_name_show-image${card ? ' popup_opened' : ''}`}>\n            <div className=\"popup__image-container\">\n                <img className=\"popup__image\" src={card.link} alt=\"Картинка\" />\n                <p className=\"popup__image-title\">{card.name}</p>\n                <button \n                    type=\"button\" \n                    className=\"popup__form-button-close\" \n                    onClick={onClose}\n                />\n            </div>\n        </div>\n    );\n}\n\nexport default ImagePopup;\n","function PopupWithForm({ title, name, children, isOpen, onClose, onSubmit, submitText }) {\n    return (\n        <div className={`popup popup_name_${name}${isOpen ? ' popup_opened' : ''}`}>\n            <div className=\"popup__container\">\n                <h2 className=\"popup__title\">{title}</h2>\n                <form name={name} className=\"popup__form\" onSubmit={onSubmit}>\n                    {children}\n                    <button \n                        type=\"button\" \n                        className=\"popup__form-button-close\" \n                        onClick={onClose}\n                    />\n                    <button \n                        type=\"submit\"\n                        className=\"popup__form-button-submit\"\n                    >{submitText}</button>\n                </form>\n            </div>\n        </div>\n    );\n}\n\nexport default PopupWithForm;\n","import { useState, useContext, useEffect } from \"react\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n    const currentUser = useContext(CurrentUserContext);\n    const [name, setName] = useState('');\n    const [description, setDescription] = useState('');\n\n    useEffect(() => {\n        setName(currentUser.name);\n        setDescription(currentUser.about);\n    }, [currentUser, isOpen]); \n\n    function handleChangeName(e) {\n        setName(e.target.value);\n    }\n\n    function handleChangeDescription(e) {\n        setDescription(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        // Запрещаем браузеру переходить по адресу формы\n        e.preventDefault();\n      \n        // Передаём значения управляемых компонентов во внешний обработчик\n        onUpdateUser({\n          name,\n          about: description,\n        });\n      }\n\n    return (\n        <PopupWithForm\n            name=\"edit-profile\"\n            title=\"Редактировать профиль\"\n            isOpen={isOpen}\n            onClose={onClose}\n            submitText=\"Сохранить\"\n            onSubmit={handleSubmit}\n        >\n            <div className=\"popup__form-inputs\">\n                <div className=\"popup__form-field\">\n                    <input \n                        id=\"profile-name\" \n                        name=\"name\" \n                        type=\"text\" \n                        placeholder=\"Имя\" \n                        className=\"popup__form-input\" \n                        minLength=\"2\" \n                        maxLength=\"40\" \n                        required \n                        value={name}\n                        onChange={handleChangeName}\n                        />\n                    <span className=\"popup__form-input-error profile-name-error\"></span>\n                </div>\n                <div className=\"popup__form-field\">\n                    <input \n                        id=\"profile-about\" \n                        name=\"about\" \n                        type=\"text\" \n                        placeholder=\"О себе\" \n                        className=\"popup__form-input\" \n                        minLength=\"2\" \n                        maxLength=\"200\" \n                        required \n                        value={description}\n                        onChange={handleChangeDescription}\n                        />\n                    <span className=\"popup__form-input-error profile-about-error\"></span>\n                </div>\n            </div>\n        </PopupWithForm>\n    );\n}\n\nexport default EditProfilePopup;","import { useRef } from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup({ onUpdateAvatar, isOpen, onClose }) {\n    const avatarInputRef = useRef();\n\n    function handleSubmit(e) {\n        e.preventDefault();\n      \n        onUpdateAvatar({\n          avatar: avatarInputRef.current.value,\n        });\n      }\n\n    return (\n        <PopupWithForm\n            name=\"update-avatar\"\n            title=\"Обновить аватар\"\n            isOpen={isOpen}\n            onClose={onClose}\n            submitText=\"Сохранить\"\n            onSubmit={handleSubmit}\n        >\n            <div className=\"popup__form-inputs\">\n                <div className=\"popup__form-field\">\n                <input ref={avatarInputRef} id=\"avatar-link\" name=\"avatar\" type=\"url\" placeholder=\"Ссылка на аватар\" className=\"popup__form-input\" required />\n                <span className=\"popup__form-input-error avatar-link-error\"></span>\n                </div>\n            </div>\n        </PopupWithForm>\n    );\n}\n\nexport default EditAvatarPopup;\n","export default __webpack_public_path__ + \"static/media/SuccessIcon.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/FailIcon.df8eddf6.svg\";","import successIcon from \"../images/SuccessIcon.svg\";\nimport failIcon from \"../images/FailIcon.svg\";\nimport React from \"react\";\n\nfunction InfoTooltip({ isOpen, isSuccess, onClose }) {\n  return (\n    <div\n      className={`popup popup_type_tooltip ${isOpen ? \"popup_opened\" : \"\"}`}\n    >\n      <div className=\"popup__container\">\n        <div className=\"popup__tooltip-content\">\n            <img\n              src={isSuccess ? successIcon : failIcon}\n              alt={isSuccess ? 'Регистрация прошла успешно.' : 'Регистрация не была выполнена.'}\n              className=\"popup__tooltip_image\"\n            />\n            <p className=\"popup__tooltip_message\">\n              {isSuccess ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так. Попробуйте ещё раз!'}\n            </p>\n        </div>\n        <button \n            type=\"button\" \n            className=\"popup__form-button-close popup__form-button-close_size popup__faded-in\" \n            onClick={onClose} \n        />\n      </div>\n    </div>\n  );\n}\n\nexport default InfoTooltip;","import { useRef } from 'react';\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\n    const nameInputRef = useRef();\n    const linkInputRef = useRef();\n\n    function handleAddPlaceSubmit(e) {\n        e.preventDefault();\n\n        onAddPlace({\n            name: nameInputRef.current.value,\n            link: linkInputRef.current.value\n        });\n    }\n\n    return (\n        <PopupWithForm\n            name=\"add-card\"\n            title=\"Новое место\"\n            isOpen={isOpen}\n            onClose={onClose}\n            submitText=\"Создать\"\n            onSubmit={handleAddPlaceSubmit}\n        >\n            <div className=\"popup__form-inputs\">\n                <div className=\"popup__form-field\">\n                    <input ref={nameInputRef} id=\"card-name\" name=\"name\" type=\"text\" placeholder=\"Название\" className=\"popup__form-input\" minLength=\"2\" maxLength=\"30\" required />\n                    <span className=\"popup__form-input-error card-name-error\"></span>\n                </div>\n                <div className=\"popup__form-field\">\n                    <input ref={linkInputRef} id=\"card-link\" name=\"link\" type=\"url\" placeholder=\"Ссылка на картинку\" className=\"popup__form-input\" required />\n                    <span className=\"popup__form-input-error card-link-error\" />\n                </div>\n            </div>\n        </PopupWithForm>\n    )\n}\n\nexport default AddPlacePopup;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Register(props) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value);\n  }\n\n  function handlePasswordChange(e) {\n    setPassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onRegister(email, password);\n  }\n\n  return (\n    <section className=\"auth\">\n      <h2 className=\"auth__title\">Регистрация</h2>\n      <form className=\"auth__form\" onSubmit={handleSubmit}>\n        <input\n          className=\"auth__form-input\"\n          placeholder=\"Email\"\n          name=\"email\"\n          type=\"email\"\n          required\n          value={email || \"\"}\n          onChange={handleEmailChange}\n          autoComplete=\"off\"\n        ></input>\n        <input\n          className=\"auth__form-input\"\n          placeholder=\"Пароль\"\n          name=\"password\"\n          type=\"password\"\n          required\n          value={password || \"\"}\n          onChange={handlePasswordChange}\n          autoComplete=\"off\"\n        ></input>\n\n        <button className=\"auth__form-submit-btn auth__form-submit-btn_size\" type=\"submit\">\n          Зарегистрироваться\n        </button>\n        <div className=\"auth__signup\">\n          <p className=\"auth__signup_text\">Уже зарегистрированы?</p>\n          <Link to=\"sign-in\" className=\"auth__signup_link\">\n            Войти\n          </Link>\n        </div>\n\n      </form>\n    </section>\n  );\n}\n\nexport default Register;","import React from \"react\";\n\nfunction Login(props) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setpassword] = React.useState(\"\");\n\n  function handleEmailChange(e) {\n    setEmail(e.target.value);\n  }\n  function handlePasswordChange(e) {\n    setpassword(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    props.onLogin(email, password);\n  }\n\n  return (\n    <>      \n      <section className=\"auth\">\n        <h2 className=\"auth__title\">Вход</h2>\n        <form className=\"auth__form\" onSubmit={handleSubmit}>\n          <input\n            onChange={handleEmailChange}\n            className=\"auth__form-input\"\n            placeholder=\"Email\"\n            name=\"email\"\n            type=\"email\"\n            required\n            value={email || \"\"}\n            autoComplete=\"off\"\n          ></input>\n          <input\n            onChange={handlePasswordChange}\n            className=\"auth__form-input\"\n            placeholder=\"Пароль\"\n            name=\"password\"\n            type=\"password\"\n            required\n            value={password || \"\"}\n            autoComplete=\"off\"\n          ></input>\n\n          <button className=\"auth__form-submit-btn\" type=\"submit\">\n            Войти\n          </button>\n        </form>\n      </section>\n    </>\n  );\n}\n\nexport default Login;\n","const BASE_URL = \"https://auth.nomoreparties.co\";\n\nfunction checkResponse(res) {\n  if (res.ok) {\n    return res.json();\n  }\n  return Promise.reject(`${res.status}`);\n}\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      email: email,\n      password: password,\n    }),\n  })\n    .then(checkResponse)\n};\n\nexport const login = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      email: email,\n      password: password,\n    }),\n  })\n    .then(checkResponse)\n    \n};\n\nexport const checkToken = (jwt) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${jwt}`,\n    },\n  })\n    .then(checkResponse)\n};","import React from \"react\";\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport ProtectedRoute from './ProtectedRoute';\nimport api from \"../utils/api\";\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport ImagePopup from './ImagePopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport InfoTooltip from './InfoTooltip';\nimport AddPlacePopup from './AddPlacePopup';\nimport CurrentUserContext from '../contexts/CurrentUserContext';\nimport Register from \"./Register\";\nimport Login from \"./Login\";\nimport * as auth from \"../utils/auth\";\n\n\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState({\n    name: '',\n    about: ''\n  });\n  const [cards, setCards] = React.useState([]);\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState(\"\");\n  const history = useHistory();\n\n  const [isSuccess, setIsSuccess] = React.useState(false);\n  const [isLoading, setIsLoading] = React.useState(false);\n\n  React.useEffect(() => {\n    setIsLoading(true);\n\n    api.getInitialData() \n      .then(([user, cards]) => {\n        setCurrentUser(user);\n        setCards(cards);\n      })\n      .catch((err) => console.log(err))\n      .finally(() => setIsLoading(false))\n  }, []);\n\n  //Хук для проверки токена при каждом монтировании компонента App\n  React.useEffect(() => {\n    const jwt = localStorage.getItem(\"jwt\");\n    //проверим существует ли токен в хранилище браузера localStorage\n    if (jwt) {\n      auth\n        .checkToken(jwt)\n        .then((res) => {\n          setIsLoggedIn(true);\n          setEmail(res.data.email);\n          history.push(\"/\");\n        })\n        .catch((err) => {\n          if (err.status === 401) {\n            console.log(\"401 — Токен не передан или передан не в том формате\");\n          }\n          console.log(\"401 — Переданный токен некорректен\");\n        });\n    }\n  }, [history]);\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard(null);\n    setIsInfoTooltipOpen(false);\n  };\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  };\n\n  const handleUpdateUser = (user) => {\n    api.setUserInfo(user)\n      .then((updatedUser) => {\n        setCurrentUser(updatedUser);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleUpdateAvatar = (user) => {\n    api.setUserAvatar(user)\n      .then((updatedUser) => {\n        setCurrentUser(updatedUser);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  const handleAddPlace = (place) => {\n    api.postCard(place)\n      .then((newCard) => {\n        setCards((state) => [newCard, ...state]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  };\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleRegisterSubmit(email, password) {\n    auth\n      .register(email, password)\n      .then((res) => {\n        setIsSuccess(true);\n        history.push(\"/sign-in\");\n      })\n      .catch((err) => {\n        if (err.status === 400) {\n          console.log(\"400 - некорректно заполнено одно из полей\");\n        }\n        setIsSuccess(false);\n      })\n      .finally(() => {\n        setIsInfoTooltipOpen(true);\n      });\n  }\n\n  function handleLoginSubmit(email, password) {\n    auth\n      .login(email, password)\n      .then((res) => {\n        localStorage.setItem(\"jwt\", res.token);\n        setIsLoggedIn(true);\n        setEmail(email);\n        history.push(\"/\");\n      })\n      .catch((err) => {\n        if (err.status === 400) {\n          console.log(\"400 - не передано одно из полей\");\n        } else if (err.status === 401) {\n          console.log(\"401 - пользователь с email не найден\");\n        }\n      });\n  }\n\n  function handleSignOut() {\n    localStorage.removeItem(\"jwt\");\n    setIsLoggedIn(false);\n    history.push(\"/sign-in\");\n  }\n\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(true);\n  };\n\n  const handleInfoTooltipClick = () => {\n    setIsInfoTooltipOpen(true);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page__content\">\n        <Header email={email} onSignOut={handleSignOut} />\n        <Switch>\n          <ProtectedRoute\n            exact\n            path=\"/\"\n            cards={cards}\n            isLoggedIn={isLoggedIn}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onInfoTooltip={handleInfoTooltipClick}\n            onCardClick={handleCardClick}\n            onCardLike={handleCardLike}\n            onCardDelete={handleCardDelete}\n            component={Main}\n          />\n          \n          <Route path=\"/sign-in\">\n            <Login onLogin={handleLoginSubmit} />\n          </Route>\n          <Route path=\"/sign-up\">\n            <Register onRegister={handleRegisterSubmit} />\n          </Route>\n          <Route>\n            {isLoggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/sign-in\" />}\n          </Route>*/\n        </Switch>\n\n        {isLoggedIn && <Footer />}\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlace}\n        />\n\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n          submitText=\"Да\"\n        />\n\n        <InfoTooltip\n          isOpen={isInfoTooltipOpen}\n          onClose={closeAllPopups}\n          isSuccess={isSuccess}\n        />\n      </div>\n    </CurrentUserContext.Provider>\n\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}